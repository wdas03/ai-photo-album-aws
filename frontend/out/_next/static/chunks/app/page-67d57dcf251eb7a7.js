(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1774:function(e,t,s){Promise.resolve().then(s.bind(s,5579))},5579:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Component}});var r=s(7437),n=s(2265),a=s(8904),l=s(7042),o=s(4769);function cn(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,o.m6)((0,l.W)(t))}let i=a.fC,c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(a.aV,{ref:t,className:cn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...n})});c.displayName=a.aV.displayName;let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(a.xz,{ref:t,className:cn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...n})});d.displayName=a.xz.displayName;let u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(a.VY,{ref:t,className:cn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...n})});u.displayName=a.VY.displayName;let f=n.forwardRef((e,t)=>{let{className:s,type:n,...a}=e;return(0,r.jsx)("input",{type:n,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a})});f.displayName="Input";var m=s(7256),h=s(6061);let p=(0,h.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=n.forwardRef((e,t)=>{let{className:s,variant:n,size:a,asChild:l=!1,...o}=e,i=l?m.g7:"button";return(0,r.jsx)(i,{className:cn(p({variant:n,size:a,className:s})),ref:t,...o})});x.displayName="Button";var g=s(6743);let v=(0,h.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),b=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(g.f,{ref:t,className:cn(v(),s),...n})});b.displayName=g.f.displayName;var y=s(7516),j=s.n(y);function Component(){let[e,t]=(0,n.useState)(!1),s="test-latest",a=(0,n.useRef)(null),l=(0,n.useRef)(null),[o,m]=(0,n.useState)([]),[h,p]=(0,n.useState)(!1),[g,v]=(0,n.useState)(""),[y,w]=(0,n.useState)(null),[N,k]=(0,n.useState)(""),handleUpload=async e=>{if(e.preventDefault(),v(""),y){let e=encodeURIComponent(y.name),t=N.toLowerCase().split(",").map(e=>e.trim()).join(",");console.log(e),console.log(y),console.log(t);try{let r=await fetch("https://bb60usynxd.execute-api.us-east-1.amazonaws.com/".concat(s,"/upload/b2-ccbd-asgn2/").concat(e),{method:"PUT",body:y,headers:{"Content-Type":y.type,"x-amz-meta-customLabels":t}});console.log("Sent request to upload file endpoint."),r.ok?(console.log("File uploaded successfully."),v("Successfully uploaded image!")):(console.error("File upload failed:",r.statusText),v("Failed to upload image: ".concat(r.statusText,"."))),console.log(r)}catch(e){console.log(e),v("Error uploading image.")}}};(0,n.useEffect)(()=>{let e=window.SpeechRecognition||window.webkitSpeechRecognition;e&&(a.current||(a.current=new e),a.current&&(a.current.continuous=!0,a.current.interimResults=!0,a.current.onresult=e=>{let t="";for(let s=e.resultIndex;s<e.results.length;++s){let r=e.results[s][0].transcript;e.results[s].isFinal,t+=r}l.current&&(l.current.value=t)},a.current.onend=()=>{t(!1)}))},[]);let handleSearch=async()=>{var e;let t=null===(e=l.current)||void 0===e?void 0:e.value;if(t){p(!0);let e="https://bb60usynxd.execute-api.us-east-1.amazonaws.com/".concat(s,"/search?q=").concat(encodeURIComponent(t));try{let t=await fetch(e),s=await t.json();m(s.imagePaths)}catch(e){console.error("There was an error fetching the search results:",e)}finally{p(!1)}}};return(0,r.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,r.jsx)("nav",{className:"flex items-center justify-center p-4 bg-gray-800 text-white",children:(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Photo Album"})}),(0,r.jsx)("div",{className:"pr-40 pl-40 pt-32",children:(0,r.jsxs)(i,{className:"w-full",defaultValue:"search",children:[(0,r.jsxs)(c,{className:"flex justify-center border-b",children:[(0,r.jsx)(d,{className:"px-4 py-2 text-center font-semibold text-zinc-900",value:"search",children:"Search"}),(0,r.jsx)(d,{className:"px-4 py-2 text-center font-semibold text-zinc-900",value:"upload",children:"Upload"})]}),(0,r.jsx)(u,{value:"search",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(f,{className:"pl-12 pr-14 rounded-md",id:"search",ref:l,placeholder:"Search for images...",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),handleSearch())}}),(0,r.jsxs)("svg",{className:" absolute left-3.5 top-2.5 h-5 w-5 text-zinc-500",fill:"none",height:"24",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,r.jsx)("path",{d:"m21 21-4.3-4.3"})]}),(0,r.jsxs)(x,{className:"absolute right-0 top-0",size:"icon",variant:"ghost",onClick:()=>{e?(a.current&&a.current.stop(),t(!1)):(a.current&&a.current.start(),t(!0))},children:[e?(0,r.jsx)("svg",{className:"animate-pulse h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 8 8",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("circle",{cx:"4",cy:"4",r:"3"})}):(0,r.jsxs)("svg",{className:" h-5 w-5",fill:"none",height:"24",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),(0,r.jsx)("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),(0,r.jsx)("line",{x1:"12",x2:"12",y1:"19",y2:"22"})]}),(0,r.jsx)("span",{className:"sr-only",children:"Voice Search"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"* Click the microphone button to record and again to stop when it is flashing."}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(x,{onClick:handleSearch,children:"Search"})}),h&&(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(j(),{size:30})}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-4",children:o&&o.map((e,t)=>(0,r.jsx)("img",{alt:"Search result ".concat(t),className:"rounded-md",src:e,style:{aspectRatio:"400/400",objectFit:"cover"},width:"400",height:"400"},t))})]})}),(0,r.jsx)(u,{value:"upload",children:(0,r.jsxs)("form",{className:"space-y-4",onSubmit:handleUpload,children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(b,{htmlFor:"file",children:"Upload Photo:"}),(0,r.jsx)(f,{className:"mt-1 rounded-md",id:"file",type:"file",onChange:e=>{e.target.files&&e.target.files.length>0&&w(e.target.files[0])}})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(b,{htmlFor:"labels",children:"Labels:"}),(0,r.jsx)(f,{className:"mt-1 rounded-md",id:"labels",placeholder:"Enter labels separated by commas...",onChange:e=>{k(e.target.value)}})]}),(0,r.jsx)(x,{type:"submit",className:"w-full",children:"Upload"}),g&&(0,r.jsx)("p",{className:"mt-4 text-center ".concat(g.startsWith("Successfully")?"text-green-500":"text-red-500"),children:g})]})})]})})]})}}},function(e){e.O(0,[292,971,472,744],function(){return e(e.s=1774)}),_N_E=e.O()}]);